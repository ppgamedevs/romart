# =============================================================================
# RomArt Environment Configuration
# =============================================================================

# Database Configuration
DATABASE_URL="postgresql://postgres:Muierapid33#@db.fybgcqqreebirjwfrrin.supabase.co:5432/postgres?sslmode=require"

# Redis Configuration (for rate limiting and sessions)
UPSTASH_REDIS_REST_URL="https://sterling-burro-9756.upstash.io"
UPSTASH_REDIS_REST_TOKEN="ASYcAAImcDE2ZDJhODkxYzJmYWM0Nzg1OTk4NGI4YmUwMjBhMjg2MHAxOTc1Ng"

# =============================================================================
# Storage Configuration (Cloudflare R2)
# =============================================================================

# Storage Provider: S3, R2, or SUPABASE
STORAGE_PROVIDER=R2

# Cloudflare R2 Configuration
S3_REGION=auto
S3_BUCKET=romart-public
S3_PRIVATE_BUCKET=romart-private
S3_ACCESS_KEY_ID=your_r2_access_key_id_here
S3_SECRET_ACCESS_KEY=your_r2_secret_access_key_here
S3_ENDPOINT=https://your_account_id.r2.cloudflarestorage.com
S3_FORCE_PATH_STYLE=false

# CDN Configuration (if using custom domain)
CDN_PUBLIC_URL=https://cdn.yourdomain.com

# Upload Constraints
MAX_UPLOAD_MB=25

# Watermark Configuration
WATERMARK_ENABLED=true
WATERMARK_TEXT=RomArt
WATERMARK_OPACITY=0.30

# =============================================================================
# Authentication Configuration
# =============================================================================

# NextAuth Configuration
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_nextauth_secret_here

# Google OAuth (optional)
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here

# =============================================================================
# Application Configuration
# =============================================================================

# API Configuration
API_URL=http://localhost:3001
API_PORT=3004
WEB_PORT=3000

# Environment
NODE_ENV=development

# =============================================================================
# Supabase Configuration (Alternative to R2)
# =============================================================================

# Uncomment and configure if using Supabase Storage instead of R2
# SUPABASE_URL=your_supabase_url_here
# SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here
# SUPABASE_BUCKET_PUBLIC=romart-public
# SUPABASE_BUCKET_PRIVATE=romart-private

# =============================================================================
# AWS S3 Configuration (Alternative to R2)
# =============================================================================

# Uncomment and configure if using AWS S3 instead of R2
# S3_REGION=us-east-1
# S3_BUCKET=romart-public
# S3_PRIVATE_BUCKET=romart-private
# S3_ACCESS_KEY_ID=your_aws_access_key_id_here
# S3_SECRET_ACCESS_KEY=your_aws_secret_access_key_here
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_FORCE_PATH_STYLE=false

# =============================================================================
# Meilisearch Configuration
# =============================================================================

# Meilisearch Server Configuration
MEILI_HOST=http://localhost:7700
MEILI_MASTER_KEY=badd8dc87f331560dc6245b86b6b823648a87e78
MEILI_SEARCH_KEY=78caf90d345c9b7377bb892ba928c11491739f9e0c9d645d8eb007f9d5bd67f0
MEILI_INDEX_ARTWORKS=artworks_v1

# Web App Configuration (Public)
NEXT_PUBLIC_MEILI_HOST=http://localhost:7700
NEXT_PUBLIC_MEILI_SEARCH_KEY=78caf90d345c9b7377bb892ba928c11491739f9e0c9d645d8eb007f9d5bd67f0
NEXT_PUBLIC_MEILI_INDEX_ARTWORKS=artworks_v1

# =============================================================================
# Tax & Invoice Configuration
# =============================================================================

# Tax Strategy
TAX_STRATEGY=INTERNAL
ORIGIN_COUNTRY=RO
DEFAULT_CURRENCY=EUR

# Company Information (for invoices)
SELLER_NAME="OnlyTips SRL"
SELLER_VAT_ID="RO48815440"
SELLER_REG_NO="J40/16778/2020"
SELLER_ADDRESS_LINE1="Str. Ceahlaul 16"
SELLER_ADDRESS_CITY="București"
SELLER_ADDRESS_POSTCODE="060379"
SELLER_ADDRESS_COUNTRY="RO"
SELLER_IBAN="RO75UGBI0000362024482EUR"
SELLER_EMAIL="billing@artfromromania.com"

# Invoice Configuration
INVOICE_SERIES="RO-AFR"
INVOICE_YEAR_PREFIX=true
INVOICE_START_NUMBER=1

# VIES Configuration
VIES_ENABLED=true

# Stripe Tax (optional)
STRIPE_TAX_ENABLED=false

# =============================================================================
# Digital Delivery Configuration
# =============================================================================

# Download Configuration
DOWNLOAD_TOKEN_TTL_SECONDS=900            # 15 minute valabilitate link
DOWNLOAD_MAX_TIMES=5                      # descărcări per entitlement

# Digital Watermark Configuration
DIGITAL_WATERMARK_ENABLED=true            # aplică watermark pe imagini
DIGITAL_WATERMARK_TEXT="Purchased via ArtFromRomania"
DIGITAL_WATERMARK_INCLUDE_EMAIL=true
DIGITAL_WATERMARK_OPACITY=0.25

# =============================================================================
# Stripe Connect Configuration
# =============================================================================

# Stripe Connect (Express)
STRIPE_CONNECT_CLIENT_ID=ca_...           # Connect client ID from Stripe Dashboard
CONNECT_PLATFORM_FEE_BPS=3000             # 30% platform fee (3000 basis points)
CONNECT_PAYOUT_DELAY_DAYS=0               # 0 = immediate; 7 = 7-day return period
CONNECT_ONBOARDING_RETURN_URL=http://localhost:3000/studio/payouts
CONNECT_ONBOARDING_REFRESH_URL=http://localhost:3000/studio/payouts

# =============================================================================
# Vision & Moderation Configuration
# =============================================================================

# Vision provider optional (fallback = MANUAL)
VISION_PROVIDER=NONE            # NONE | GCV | AWS | CF_WORKERS_AI
VISION_API_KEY=                 # cheie dacă e nevoie (de ex. CF)
VISION_PROJECT_ID=              # dacă e GCV/AWS potrivit
VISION_REGION=                  # ex. eu

# Moderation
MATURE_BLUR_ENABLED=true
MATURE_CLICKTHROUGH_TEXT="Sensitive content — click to view"
UPLOAD_MAX_PER_HOUR=120         # per user/IP
REPORTS_RATE_PER_HOUR=30        # per user/IP
TRUST_INITIAL_SCORE=50
TRUST_MIN_TO_PUBLISH=0          # lăsăm 0 (gating-ul vine din KYC), dar scorul poate penaliza ranking

# =============================================================================
# Print-on-Demand (PoD) Configuration
# =============================================================================

# PoD Provider
POD_PROVIDER=INHOUSE
POD_PRINT_MIN_DPI=150
POD_PRINT_BLEED_MM=3
POD_DEFAULT_SHIP_METHOD=STANDARD      # STANDARD | EXPRESS

# In-house Rate Table (JSON)
POD_INHOUSE_RATE_TABLE_JSON='{
  "zones":[
    {"id":"RO","countries":["RO"]},
    {"id":"EU","countries":["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"]},
    {"id":"INTL","countries":["*"]}
  ],
  "sizeTiers":[
    {"id":"S","maxLongEdgeCm":40},
    {"id":"M","maxLongEdgeCm":70},
    {"id":"L","maxLongEdgeCm":100}
  ],
  "rates": [
    {"zone":"RO","method":"STANDARD","tier":"S","amount":2500,"currency":"EUR"},
    {"zone":"RO","method":"STANDARD","tier":"M","amount":3500,"currency":"EUR"},
    {"zone":"RO","method":"STANDARD","tier":"L","amount":4500,"currency":"EUR"},
    {"zone":"EU","method":"STANDARD","tier":"S","amount":9000,"currency":"EUR"},
    {"zone":"EU","method":"STANDARD","tier":"M","amount":12000,"currency":"EUR"},
    {"zone":"EU","method":"STANDARD","tier":"L","amount":15000,"currency":"EUR"},
    {"zone":"INTL","method":"STANDARD","tier":"S","amount":15000,"currency":"EUR"},
    {"zone":"INTL","method":"STANDARD","tier":"M","amount":20000,"currency":"EUR"},
    {"zone":"INTL","method":"STANDARD","tier":"L","amount":26000,"currency":"EUR"}
  ]
}'

# =============================================================================
# Shipping Configuration (ORIGINAL Artworks)
# =============================================================================

# Shipping provider (quotes). Începe cu INHOUSE (matrice). Poți schimba pe SHIPPO/EASYPOST ulterior.
SHIP_PROVIDER=INHOUSE            # INHOUSE | SHIPPO | EASYPOST
SHIP_ORIGIN_COUNTRY=RO
SHIP_ORIGIN_POSTCODE=010000
SHIP_DEFAULT_METHOD=STANDARD     # STANDARD | EXPRESS
SHIP_INSURANCE_ENABLED=true
SHIP_INSURANCE_RATE_BPS=100      # 1% din valoarea asigurată
SHIP_DIM_WEIGHT_DIVISOR=5000     # volumetric kg = L*W*H(cm)/divisor
SHIP_MAX_SIDE_CM=150             # limită latură mare pentru oversize

# Pachete disponibile (interior, cm, kg). One-line JSON.
SHIP_PACKAGES_JSON='{
  "boxes":[
    {"id":"BX_S","innerL":40,"innerW":30,"innerH":10,"maxKg":5},
    {"id":"BX_M","innerL":80,"innerW":60,"innerH":12,"maxKg":10},
    {"id":"BX_L","innerL":120,"innerW":80,"innerH":15,"maxKg":20}
  ],
  "tubes":[
    {"id":"TB_S","innerL":60,"innerDia":12,"maxKg":5},
    {"id":"TB_M","innerL":100,"innerDia":15,"maxKg":8},
    {"id":"TB_L","innerL":140,"innerDia":20,"maxKg":12}
  ]
}'

# Tarife INHOUSE pe zone & serviciu (minor units EUR). One-line JSON.
SHIP_RATE_TABLE_JSON='{
  "zones":[
    {"id":"RO","countries":["RO"]},
    {"id":"EU","countries":["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"]},
    {"id":"INTL","countries":["*"]}
  ],
  "services":["STANDARD","EXPRESS"],
  "base":[
    {"zone":"RO","service":"STANDARD","firstKg":1500,"addKg":300},
    {"zone":"RO","service":"EXPRESS","firstKg":2500,"addKg":500},
    {"zone":"EU","service":"STANDARD","firstKg":3000,"addKg":800},
    {"zone":"EU","service":"EXPRESS","firstKg":6000,"addKg":1200},
    {"zone":"INTL","service":"STANDARD","firstKg":5000,"addKg":1500},
    {"zone":"INTL","service":"EXPRESS","firstKg":9000,"addKg":2500}
  ],
  "oversizeSurcharge":[
    {"zone":"RO","amount":2000},
    {"zone":"EU","amount":5000},
    {"zone":"INTL","amount":9000}
  ],
  "signatureFee":[
    {"zone":"RO","amount":300},
    {"zone":"EU","amount":500},
    {"zone":"INTL","amount":800}
  ]
}'

# =============================================================================
# Label Purchase & Tracking Configuration
# =============================================================================

# Labels & tracking (fără pickup)
SHIP_LABEL_PROVIDER=INHOUSE           # INHOUSE (manual upload)
SHIP_LABEL_FORMAT=PDF_A4              # sau PDF_4x6
SHIP_WEBHOOK_SECRET=whsec_ship_local  # random string; folosit doar dacă vei folosi agregator ulterior

# Carrier policy (hard rules)
SHIP_CARRIER_DOMESTIC=SAMEDAY
SHIP_CARRIER_INTL=DHL

# =============================================================================
# Admin Backoffice Configuration
# =============================================================================

# Admin
ADMIN_EXPORT_MAX_ROWS=50000
ADMIN_IMPERSONATE_ENABLED=true
ADMIN_DOWNLOAD_URL_TTL_SECONDS=300

# =============================================================================
# Performance & SEO Configuration
# =============================================================================

# CDN & images
CDN_PUBLIC_URL=https://cdn.artfromromania.com
IMAGE_ALLOWED_ORIGINS=cdn.artfromromania.com,images.unsplash.com

# Revalidation
ON_DEMAND_REVALIDATE_SECRET=super-secret
EDGE_CACHE_TAG_HEADER=x-romart-tag

# RUM
RUM_PROVIDER=INTERNAL         # NONE | INTERNAL
RUM_SAMPLE_RATE=0.1           # 10%
RUM_ENDPOINT=/api/rum

# Cloudflare purge (opțional)
CF_API_TOKEN=
CF_ZONE_ID=
